
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: all 0.3s ease;
        }
        
        .dark-mode {
            background-color: #1a1a1a;
            color: #e5e5e5;
        }
        
        .venn-container {
            position: relative;
            width: 400px;
            height: 300px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .venn-circle {
            position: absolute;
            border: 3px solid;
            border-radius: 50%;
            opacity: 0.7;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .venn-circle:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }
        
        /* Estilos para las operaciones de Venn */
        .operation-highlight {
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
            animation: highlight-glow 0.5s ease-in-out;
        }
        
        .operation-path {
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.4));
        }
        
        @keyframes highlight-glow {
            0% { opacity: 0; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Mejorar los botones de operaciones */
        .venn-operation {
            transition: all 0.3s ease;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .venn-operation:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .venn-operation.ring-4 {
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5);
            transform: translateY(-1px);
        }
        
        .formula-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        /* Mejorar espaciado en cajas de fórmulas */
        .formula-box h4 {
            margin-bottom: 0.75rem !important;
            letter-spacing: 0.025em;
            line-height: 1.4;
        }
        
        .formula-box .text-lg, .formula-box .text-sm {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }
        
        .interactive-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        
        .interactive-table td, .interactive-table th {
            border: 2px solid #3b82f6;
            padding: 10px;
            text-align: center;
        }
        
        .interactive-table input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-weight: bold;
        }
        
        .result-highlight {
            background-color: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin: 10px 0;
        }
        
        .animation-fade {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .probability-bar {
            height: 20px;
            background: linear-gradient(to right, #ef4444, #f59e0b, #10b981);
            border-radius: 10px;
            position: relative;
            margin: 10px 0;
        }
        
        .probability-marker {
            position: absolute;
            top: -5px;
            width: 2px;
            height: 30px;
            background: #1f2937;
            transition: left 0.3s ease;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        /* Asegurar espaciado correcto para íconos FontAwesome */
        .fas:not(.mr-0):not(.mr-1):not(.mr-3):not(.mr-4):not(.mr-5):not(.mr-6), 
        .far:not(.mr-0):not(.mr-1):not(.mr-3):not(.mr-4):not(.mr-5):not(.mr-6), 
        .fab:not(.mr-0):not(.mr-1):not(.mr-3):not(.mr-4):not(.mr-5):not(.mr-6) {
            margin-right: 0.5rem !important;
        }
        
        /* Reforzar el espaciado para íconos con mr-2 que no se muestran correctamente */
        .fas.mr-2, .far.mr-2, .fab.mr-2 {
            margin-right: 0.5rem !important;
        }
        
        /* Espacio adicional después de íconos seguidos de texto directo */
        .fas.fa-info-circle.mr-2::after,
        .fas.fa-calculator.mr-2::after,
        .fas.fa-circle-notch.mr-2::after {
            content: " ";
            white-space: pre;
        }
        
        /* Específicamente para íconos que aparecen al inicio de texto */
        h1 .fas, h2 .fas, h3 .fas, h4 .fas, h5 .fas, h6 .fas,
        .font-semibold .fas, .font-bold .fas,
        button .fas, .tab-btn .fas {
            margin-right: 0.5rem !important;
        }
        
        /* Para íconos en bloques de información */
        .text-gray-500 .fas, .text-gray-600 .fas {
            margin-right: 0.25rem !important;
        }
        
        /* Mejorar espaciado en tablas de contingencia */
        .interactive-table th {
            padding: 12px 8px !important;
            line-height: 1.4;
            letter-spacing: 0.025em;
        }
        
        .interactive-table td {
            padding: 10px 8px !important;
            line-height: 1.3;
        }
        
        /* Espaciado específico para etiquetas de variables en tablas */
        .interactive-table th, .interactive-table td {
            white-space: nowrap;
            text-align: center;
        }
        
        /* Mejorar legibilidad de texto en cursiva matemática */
        .formula-box em, .formula-box i:not(.fas):not(.far):not(.fab) {
            font-style: italic;
            margin: 0 0.1em;
            padding: 0 0.05em;
        }
        
        /* Mejorar espaciado para etiquetas de formulario */
        .font-medium, .font-semibold, .font-bold {
            line-height: 1.5;
            letter-spacing: 0.015em;
        }
        
        /* Espaciado adicional para etiquetas de input */
        label.font-medium {
            margin-bottom: 0.5rem !important;
            display: block;
            line-height: 1.4;
        }
        
        /* Mejorar el espaciado en elementos de lista y texto */
        li, p {
            line-height: 1.6;
        }
        
        /* Espaciado específico para texto pequeño informativo */
        .text-sm {
            line-height: 1.5;
            letter-spacing: 0.01em;
        }
        
        .text-xs {
            line-height: 1.4;
            letter-spacing: 0.015em;
        }
        
        /* Correcciones específicas para la pestaña conjuntos */
        #conjuntos label {
            word-spacing: 0.1em !important;
            letter-spacing: 0.02em !important;
        }
        
        /* Espaciado para texto con strong y elementos destacados */
        strong {
            margin-right: 0.25em;
            letter-spacing: 0.01em;
        }
        
        /* Espaciado específico para párrafos con íconos informativos */
        .text-xs.text-gray-500 {
            word-spacing: 0.15em;
            letter-spacing: 0.02em;
        }
        
        /* Mejor espaciado para texto en cajas informativas */
        .bg-blue-50 p, .border-l-4 p {
            word-spacing: 0.1em;
            letter-spacing: 0.01em;
            line-height: 1.6;
        }
        
        /* Espaciado específico para etiquetas de formulario con paréntesis */
        label.font-medium {
            word-spacing: 0.1em !important;
            letter-spacing: 0.02em !important;
        }
        
        /* Regla general para mejorar el espaciado de texto que sigue inmediatamente a íconos */
        .fas + *, .far + *, .fab + * {
            margin-left: 0.1em;
        }
        
        /* Solución específica para las etiquetas de la calculadora de cardinalidad */
        #conjuntos .space-y-4 label.font-medium {
            word-spacing: 0.15em !important;
            letter-spacing: 0.025em !important;
            font-weight: 500 !important;
        }
        
        /* Selector más específico para etiquetas que siguen inputs de conjuntos */
        label[class*="font-medium"]:not(:empty) {
            word-spacing: 0.2em !important;
            letter-spacing: 0.03em !important;
        }
        
        /* Espaciado específico para etiquetas que preceden a inputs específicos */
        input[id="setA"] + *,
        input[id="setB"] + *,
        input[id="setUniverse"] + * {
            word-spacing: 0.2em !important;
            letter-spacing: 0.03em !important;
        }
        
        /* Solución más directa: selector por posición para las etiquetas de conjuntos */
        #conjuntos .bg-white .space-y-4 > div > label {
            word-spacing: 0.25em !important;
            letter-spacing: 0.035em !important;
            line-height: 1.5 !important;
        }
        
        /* Espaciado específico para texto en paréntesis */
        label.block.text-sm.font-medium.mb-2 {
            white-space: normal !important;
            overflow-wrap: break-word;
        }
        
        /* Corrección específica para el problema del texto pegado en cursiva en los labels */
        #conjuntos label.font-medium {
            font-style: normal !important;
            text-transform: none !important;
        }
        
        /* Usar pseudo-elementos para insertar espacios en texto pegado */
        #conjuntos label.font-medium::after {
            content: "";
            letter-spacing: normal;
        }
        
        /* Forzar espaciado normal en cualquier texto en cursiva no deseado */
        #conjuntos em, #conjuntos i:not(.fas):not(.far):not(.fab) {
            font-style: normal !important;
            word-spacing: 0.2em !important;
            letter-spacing: 0.05em !important;
        }
        
        /* Regla específica para arreglar texto pegado en etiquetas de conjuntos */
        #conjuntos .space-y-4 label {
            font-family: inherit !important;
            font-weight: 500 !important;
            font-style: normal !important;
        }
        
        /* Solución definitiva para texto pegado - usar word-break y espaciado forzado */
        #conjuntos label:contains("separado"):contains("comas"),
        #conjuntos label[class*="font-medium"] {
            word-break: break-word !important;
            hyphens: auto !important;
        }
        
        /* Espaciado forzado para contenido específico */
        #conjuntos .calculadora-cardinalidad label,
        #conjuntos .bg-white .space-y-4 label.block {
            white-space: pre-wrap !important;
        }
        
        /* Si el problema persiste, usar text-rendering para mejor espaciado */
        #conjuntos label.font-medium {
            text-rendering: optimizeLegibility !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }
        
        /* Estilos específicos para el botón visualizar del simulador */
        #visualize {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 10 !important;
            margin-top: 1rem !important;
            background-color: #14b8a6 !important;
            color: white !important;
            padding: 12px 16px !important;
            border: none !important;
            border-radius: 6px !important;
            font-weight: 600 !important;
            font-size: 16px !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
        }
        
        #visualize:hover {
            background-color: #0d9488 !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
        }
        
        #visualize:active {
            transform: translateY(0) !important;
        }
        
        /* Estilos para el Triángulo de Pascal */
        .pascal-triangle {
            font-family: monospace;
            text-align: center;
            line-height: 1.8;
            margin-top: 15px;
            background-color: #f5f3ff;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        
        .pascal-row {
            margin-bottom: 5px;
        }
        
        .pascal-num {
            display: inline-block;
            min-width: 3em;
            text-align: center;
            padding: 2px 6px;
            margin: 0 2px;
            border-radius: 4px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.7);
        }
        
        .pascal-highlight {
            background-color: #8b5cf6 !important;
            color: white !important;
            font-weight: bold !important;
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }
        
        .pascal-num:hover {
            background-color: rgba(139, 92, 246, 0.2);
            transform: scale(1.05);
        }
        
        /* Estilos específicos para el botón de Pascal */
        #generatePascal {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            background-color: #6366f1 !important;
        }
        
        #generatePascal:hover {
            background-color: #4f46e5 !important;
        }
        
        /* ========== ESTILOS PARA MODO OSCURO - TEORÍA DE CONTEO ========== */
        
        /* Contenedores principales en modo oscuro */
        .dark-mode #teoria-conteo .bg-white {
            background-color: #2d2d2d !important;
            color: #e5e5e5 !important;
            border: 1px solid #404040 !important;
        }
        
        /* Títulos y encabezados en modo oscuro */
        .dark-mode #teoria-conteo h2,
        .dark-mode #teoria-conteo h3,
        .dark-mode #teoria-conteo h4,
        .dark-mode #teoria-conteo h5 {
            color: #f0f0f0 !important;
        }
        
        /* Texto normal y párrafos en modo oscuro */
        .dark-mode #teoria-conteo p,
        .dark-mode #teoria-conteo li,
        .dark-mode #teoria-conteo span:not(.pascal-highlight) {
            color: #d0d0d0 !important;
        }
        
        /* Inputs y controles en modo oscuro */
        .dark-mode #teoria-conteo input[type="text"],
        .dark-mode #teoria-conteo input[type="number"],
        .dark-mode #teoria-conteo select {
            background-color: #3a3a3a !important;
            color: #e5e5e5 !important;
            border: 1px solid #555 !important;
        }
        
        .dark-mode #teoria-conteo input[type="text"]:focus,
        .dark-mode #teoria-conteo input[type="number"]:focus,
        .dark-mode #teoria-conteo select:focus {
            background-color: #444 !important;
            border-color: #6366f1 !important;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2) !important;
        }
        
        /* Labels en modo oscuro */
        .dark-mode #teoria-conteo label {
            color: #e0e0e0 !important;
            font-weight: 500 !important;
        }
        
        /* Cajas de fórmulas en modo oscuro */
        .dark-mode #teoria-conteo .formula-box {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 100%) !important;
            color: #f0f0f0 !important;
            border: 1px solid #6d28d9 !important;
        }
        
        /* Áreas de resultados en modo oscuro */
        .dark-mode #teoria-conteo .bg-gray-50 {
            background-color: #333 !important;
            color: #e5e5e5 !important;
            border: 1px solid #555 !important;
        }
        
        /* Cajas de información en modo oscuro */
        .dark-mode #teoria-conteo .bg-blue-50 {
            background-color: #1e3a8a !important;
            color: #dbeafe !important;
            border-left-color: #3b82f6 !important;
        }
        
        .dark-mode #teoria-conteo .bg-green-50 {
            background-color: #14532d !important;
            color: #dcfce7 !important;
            border-left-color: #22c55e !important;
        }
        
        .dark-mode #teoria-conteo .bg-yellow-50 {
            background-color: #713f12 !important;
            color: #fef3c7 !important;
            border-left-color: #f59e0b !important;
        }
        
        .dark-mode #teoria-conteo .bg-red-50 {
            background-color: #7f1d1d !important;
            color: #fecaca !important;
            border-left-color: #ef4444 !important;
        }
        
        .dark-mode #teoria-conteo .bg-purple-50 {
            background-color: #581c87 !important;
            color: #e9d5ff !important;
            border-left-color: #a855f7 !important;
        }
        
        /* Elementos de visualización en modo oscuro */
        .dark-mode #teoria-conteo .bg-blue-100 {
            background-color: #1e40af !important;
            color: #dbeafe !important;
        }
        
        .dark-mode #teoria-conteo .bg-green-100 {
            background-color: #166534 !important;
            color: #dcfce7 !important;
        }
        
        .dark-mode #teoria-conteo .bg-yellow-100 {
            background-color: #a16207 !important;
            color: #fef3c7 !important;
        }
        
        /* Triángulo de Pascal en modo oscuro */
        .dark-mode .pascal-triangle {
            background-color: #2d2d2d !important;
            border: 1px solid #555 !important;
            color: #e5e5e5 !important;
        }
        
        .dark-mode .pascal-num {
            background-color: rgba(75, 75, 75, 0.8) !important;
            color: #e5e5e5 !important;
            border: 1px solid #555 !important;
        }
        
        .dark-mode .pascal-num:hover {
            background-color: rgba(139, 92, 246, 0.4) !important;
            color: #f0f0f0 !important;
        }
        
        .dark-mode .pascal-highlight {
            background-color: #8b5cf6 !important;
            color: #ffffff !important;
            border-color: #7c3aed !important;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.5) !important;
        }
        
        /* Texto en cajas de ejemplo en modo oscuro */
        .dark-mode #teoria-conteo .text-gray-500 {
            color: #a0a0a0 !important;
        }
        
        .dark-mode #teoria-conteo .text-gray-600 {
            color: #b0b0b0 !important;
        }
        
        .dark-mode #teoria-conteo .text-sm {
            color: #d0d0d0 !important;
        }
        
        .dark-mode #teoria-conteo .text-xs {
            color: #c0c0c0 !important;
        }
        
        /* Tablas en modo oscuro */
        .dark-mode #teoria-conteo table {
            background-color: #2d2d2d !important;
            color: #e5e5e5 !important;
        }
        
        .dark-mode #teoria-conteo th,
        .dark-mode #teoria-conteo td {
            border-color: #555 !important;
            color: #e5e5e5 !important;
        }
        
        .dark-mode #teoria-conteo th {
            background-color: #3a3a3a !important;
        }
        
        .dark-mode #teoria-conteo tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.05) !important;
        }
        
        /* Botones disabled en modo oscuro */
        .dark-mode #teoria-conteo button:disabled {
            background-color: #4a4a4a !important;
            color: #888 !important;
            cursor: not-allowed !important;
        }
        
        /* Mensajes de error en modo oscuro */
        .dark-mode #teoria-conteo .text-red-500 {
            color: #fca5a5 !important;
        }
        
        .dark-mode #teoria-conteo .text-yellow-600 {
            color: #fbbf24 !important;
        }
        
        /* Enlaces en modo oscuro */
        .dark-mode #teoria-conteo a {
            color: #60a5fa !important;
        }
        
        .dark-mode #teoria-conteo a:hover {
            color: #93c5fd !important;
        }
        
        /* Elementos strong y bold en modo oscuro */
        .dark-mode #teoria-conteo strong,
        .dark-mode #teoria-conteo .font-bold,
        .dark-mode #teoria-conteo .font-semibold {
            color: #f0f0f0 !important;
        }
        
        /* Separadores y bordes en modo oscuro */
        .dark-mode #teoria-conteo hr {
            border-color: #555 !important;
        }
        
        /* Scrollbars en modo oscuro */
        .dark-mode #teoria-conteo ::-webkit-scrollbar {
            background-color: #2d2d2d !important;
        }
        
        .dark-mode #teoria-conteo ::-webkit-scrollbar-thumb {
            background-color: #555 !important;
            border-radius: 6px !important;
        }
        
        .dark-mode #teoria-conteo ::-webkit-scrollbar-thumb:hover {
            background-color: #666 !important;
        }
        
        /* ========== ESTILOS PARA DIAGRAMAS DE ÁRBOL ========== */
        
        /* Contenedor principal del árbol */
        .tree-diagram {
            font-family: 'Arial', sans-serif;
            line-height: 1.4;
            color: #2d3748;
            overflow-x: auto;
            padding: 20px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }
        
        /* Nodos del árbol */
        .tree-node {
            display: inline-block;
            margin: 4px;
            padding: 8px 12px;
            background-color: #ffffff;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            min-width: 40px;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* Nodos de diferentes niveles con colores */
        .tree-node.level-0 {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }
        
        .tree-node.level-1 {
            background-color: #ebf8ff;
            border-color: #4299e1;
            color: #2a4365;
        }
        
        .tree-node.level-2 {
            background-color: #faf5ff;
            border-color: #9f7aea;
            color: #44337a;
        }
        
        .tree-node.level-3 {
            background-color: #fffaf0;
            border-color: #ed8936;
            color: #7b341e;
        }
        
        .tree-node.final {
            background-color: #f0fff4;
            border-color: #48bb78;
            color: #276749;
            font-weight: 600;
        }
        
        /* Hover effects */
        .tree-node:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        /* Líneas conectoras */
        .tree-branch {
            display: inline-block;
            width: 20px;
            height: 1px;
            background-color: #a0aec0;
            margin: 0 2px;
            vertical-align: middle;
        }
        
        .tree-vertical {
            width: 1px;
            height: 20px;
            background-color: #a0aec0;
            display: inline-block;
            margin: 2px 0;
        }
        
        /* Filas del árbol */
        .tree-level {
            margin: 15px 0;
            text-align: center;
        }
        
        .tree-level:first-child {
            margin-top: 0;
        }
        
        /* Etiquetas de nivel */
        .tree-label {
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 10px;
            text-align: left;
        }
        
        /* Contador de resultados */
        .tree-count {
            background-color: #feb2b2;
            color: #742a2a;
            border-color: #fc8181;
            font-weight: 700;
            padding: 6px 10px;
            border-radius: 20px;
            margin: 5px;
            display: inline-block;
        }
        
        /* Paths individuales */
        .tree-path {
            background-color: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            padding: 4px 8px;
            margin: 2px;
            font-size: 11px;
            color: #4a5568;
            display: inline-block;
        }
        
        /* Animaciones */
        @keyframes treeGrow {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .tree-animate {
            animation: treeGrow 0.5s ease-out;
        }
        
        /* Estilos responsive */
        @media (max-width: 768px) {
            .tree-diagram {
                padding: 10px;
                font-size: 11px;
            }
            
            .tree-node {
                padding: 6px 8px;
                font-size: 10px;
                min-width: 30px;
            }
        }
        
        /* MODO OSCURO PARA DIAGRAMAS DE ÁRBOL */
        .dark-mode .tree-diagram {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            border-color: #4a5568;
            color: #e2e8f0;
        }
        
        .dark-mode .tree-node {
            background-color: #4a5568;
            border-color: #718096;
            color: #f7fafc;
        }
        
        .dark-mode .tree-node.level-0 {
            background-color: #234e52;
            border-color: #38b2ac;
            color: #e6fffa;
        }
        
        .dark-mode .tree-node.level-1 {
            background-color: #2a4365;
            border-color: #4299e1;
            color: #ebf8ff;
        }
        
        .dark-mode .tree-node.level-2 {
            background-color: #44337a;
            border-color: #9f7aea;
            color: #faf5ff;
        }
        
        .dark-mode .tree-node.level-3 {
            background-color: #7b341e;
            border-color: #ed8936;
            color: #fffaf0;
        }
        
        .dark-mode .tree-node.final {
            background-color: #276749;
            border-color: #48bb78;
            color: #f0fff4;
        }
        
        .dark-mode .tree-branch,
        .dark-mode .tree-vertical {
            background-color: #718096;
        }
        
        .dark-mode .tree-label {
            color: #cbd5e0;
        }
        
        .dark-mode .tree-count {
            background-color: #742a2a;
            color: #feb2b2;
            border-color: #e53e3e;
        }
        
        .dark-mode .tree-path {
            background-color: #4a5568;
            border-color: #718096;
            color: #e2e8f0;
        }
    